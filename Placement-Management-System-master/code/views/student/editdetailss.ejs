<%- include ('../partials/header.html'); -%>
    <title>Edit Student Details</title>
    <link rel="stylesheet" href="../../css/student.css">
</head>
<body>
    <%- include ('partials/navbar.html'); -%>
    <br/><br/><br/><br/>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <hr class="hl1">
                <div class="page-header bg-light">
                    <h1 class="text-center">
                        Edit Profile
                    </h1>
                </div>
                <hr class="hl1"><br/>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-10 form-group bg-light border rounded border-primary">
                <form action="/student/editdetailss" method="post" onsubmit="return validateForm()">
                    <div class="row">
                        <!-- Personal Details Section -->
                        <div class="col-md-6 profile-content">
                            <p class="text-center" style="font-size: xx-large;">Personal Details</p>
                            <hr class="hl1"><hr>
                            <input type="text" name="user_id" value="<%= res.sid %>" hidden>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.sname %>" name="sname">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Email</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.semail %>" readonly>
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Age</label>
                                <div class="col-sm-3">
                                    <input type="number" class="form-control" min="16" max="150" step="1" value="<%= res.age %>" name="age">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Gender</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.gender %>" name="gender">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">City</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.city %>" name="city">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Mobile No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.smobileno %>" name="smobileno">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Is Verified</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" value="<%= res.isverifed %>" readonly>
                                </div>
                            </div>
                            <hr><hr>
                        </div>
                        
                        <!-- Academic Details Section -->
                        <div class="col-md-6 profile-content">
                            <p class="text-center" style="font-size: xx-large;">Academic Details</p>
                            <hr class="hl1"><hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">College Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.collegename %>" name="collegename">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Department Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="<%= res.dname %>" name="dname">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Passing Year</label>
                                <div class="col-sm-3">
                                    <input type="number" class="form-control" min="1900" max="2099" value="<%= res.passingyear %>" name="passingyear">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">10th Result (%)</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" value="<%= res.result10 %>" name="result10">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">12th Result (%)</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" value="<%= res.result12 %>" name="result12">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Avg CPI</label>
                                <div class="col-sm-3">
                                    <input type="text" class="form-control" value="<%= res.avgcgpa %>" name="avgcgpa">
                                </div>
                            </div>
                            <hr>
                            
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Backlogs</label>
                                <div class="col-sm-3">
                                    <input type="number" class="form-control" min="0" max="8" value="<%= res.backlogs %>" name="backlogs">
                                </div>
                            </div>
                            <hr><hr>
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-outline-info">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    
    <script>
        // Client-side validation script
        function validateForm() {
            // Validate Name (only alphabets, no numbers)
            var name = document.getElementsByName("sname")[0].value;
            if (/[\d]/.test(name)) {  // Check if name contains any digits
                alert("Name must not contain numbers.");
                return false;  // Prevent form submission
            }
            var department = document.getElementsByName("dname")[0].value;
        if (/\d/.test(department)) {  // Check if department name contains any digits
            alert("Department Name must not contain numbers.");
            return false;  // Prevent form submission
        }
            // Validate Gender (only alphabets, no numbers)
            var gender = document.getElementsByName("gender")[0].value;
            if (/[\d]/.test(gender)) {  // Check if gender contains any digits
                alert("Gender must not contain numbers.");
                return false;  // Prevent form submission
            }
      // Validate 10th Result (%) (only numbers)
      var result10 = document.getElementsByName("result10")[0].value;
        if (!/^\d+(\.\d{1,2})?$/.test(result10)) {  // Allow only numbers (optional decimal)
            alert("10th Result must be a valid number.");
            return false;  // Prevent form submission
        }

        // Validate 12th Result (%) (only numbers)
        var result12 = document.getElementsByName("result12")[0].value;
        if (!/^\d+(\.\d{1,2})?$/.test(result12)) {  // Allow only numbers (optional decimal)
            alert("12th Result must be a valid number.");
            return false;  // Prevent form submission
        }

        // Validate Avg CPI (only numbers)
        var avgCPI = document.getElementsByName("avgcgpa")[0].value;
        if (!/^\d+(\.\d{1,2})?$/.test(avgCPI)) {  // Allow only numbers (optional decimal)
            alert("Avg CPI must be a valid number.");
            return false;  // Prevent form submission
        }
            // Validate Mobile No. (must be numeric and exactly 10 digits)
            var mobileNo = document.getElementsByName("smobileno")[0].value;
            if (!/^\d{10}$/.test(mobileNo)) {
                alert("Mobile number must be exactly 10 digits and contain only numbers.");
                return false;  // Prevent form submission
            }
    
            // Validate Age (must be a 2-digit or 4-digit number)
            var age = document.getElementsByName("age")[0].value;
        if (age < 16 || age > 99 || !/^\d+$/.test(age)) {  // Age must be a number between 16 and 99
            alert("Age must be a valid 2-digit number between 16 and 99.");
            return false;  // Prevent form submission
        }
        var city = document.getElementsByName("city")[0].value;
        if (/\d/.test(city)) {  // Check if city contains any digits
            alert("City name must not contain numbers.");
            return false;  // Prevent form submission
        }
    
            return true;  // Proceed with form submission
        }
    </script>
    
<%- include ('../partials/footer.html'); -%>
